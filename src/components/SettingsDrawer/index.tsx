import { useTransition, animated } from '@react-spring/web';
import { drawerAnimation } from '../../animations';
import { useContext } from "react";
import { appContext } from "../../AppContext";

type SettingsMenuProps = {
  display: boolean;
  close: () => void;
};

export function SettingsMenu({ display, close }: SettingsMenuProps) {
  const { showHiddenItems, setShowHiddenItems } = useContext(appContext);
  const transition: any = useTransition(display, drawerAnimation as any);

  const toggleShowHiddenFiles = () => {
    setShowHiddenItems(prevState => !prevState);
    close();
  }

  return (
    <div>
      {transition((style, display) => (
        <div>
          {display && (
            <div className="restriction fixed w-screen h-screen flex justify-center items-center z-10">
              {display && (
                <div className="relative z-10 w-full">
                  <animated.div style={style} className="drawer restriction bg-white p-8 mx-auto">
                    <div className="text-center">
                      <div onClick={toggleShowHiddenFiles} className="cursor-pointer flex mb-7">
                        <div className="col-span-2">
                          {!showHiddenItems && (
                            <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <mask id="mask0_703_111" maskUnits="userSpaceOnUse" x="0" y="0" width="40" height="40">
                                <rect width="40" height="40" fill="#D9D9D9"/>
                              </mask>
                              <g mask="url(#mask0_703_111)">
                                <path d="M20.0073 25.7585C21.8338 25.7585 23.3879 25.1153 24.6696 23.8289C25.9513 22.5425 26.5921 20.9861 26.5921 19.1596C26.5921 17.3331 25.9489 15.779 24.6625 14.4973C23.3762 13.2156 21.8197 12.5748 19.9932 12.5748C18.1667 12.5748 16.6127 13.218 15.331 14.5044C14.0493 15.7907 13.4085 17.3472 13.4085 19.1737C13.4085 21.0002 14.0516 22.5543 15.338 23.8359C16.6244 25.1176 18.1808 25.7585 20.0073 25.7585ZM19.9919 23.7457C18.7176 23.7457 17.6372 23.2997 16.7508 22.4077C15.8644 21.5157 15.4212 20.4325 15.4212 19.1582C15.4212 17.8839 15.8672 16.8036 16.7592 15.9172C17.6512 15.0308 18.7344 14.5876 20.0087 14.5876C21.283 14.5876 22.3634 15.0336 23.2497 15.9256C24.1361 16.8176 24.5793 17.9007 24.5793 19.175C24.5793 20.4493 24.1333 21.5297 23.2413 22.4161C22.3493 23.3025 21.2662 23.7457 19.9919 23.7457ZM20.0026 30.8333C16.177 30.8333 12.6997 29.7675 9.57083 27.6361C6.44194 25.5047 4.10648 22.6816 2.56445 19.1666C4.10648 15.6517 6.44118 12.8285 9.56854 10.6971C12.6959 8.56571 16.1724 7.5 19.998 7.5C23.8236 7.5 27.3008 8.56571 30.4297 10.6971C33.5586 12.8285 35.8941 15.6517 37.4361 19.1666C35.8941 22.6816 33.5594 25.5047 30.432 27.6361C27.3046 29.7675 23.8282 30.8333 20.0026 30.8333ZM19.9956 28.7393C23.2501 28.7393 26.2369 27.8734 28.956 26.1415C31.675 24.4097 33.7496 22.0847 35.1798 19.1666C33.7496 16.2485 31.6765 13.9236 28.9606 12.1918C26.2447 10.4599 23.2595 9.59396 20.005 9.59396C16.7504 9.59396 13.7636 10.4599 11.0446 12.1918C8.32559 13.9236 6.24529 16.2485 4.8037 19.1666C6.24529 22.0847 8.32404 24.4097 11.04 26.1415C13.7558 27.8734 16.7411 28.7393 19.9956 28.7393Z" fill="#08090B"/>
                              </g>
                            </svg>
                          )}
                          {showHiddenItems && (
                            <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <mask id="mask0_703_117" maskUnits="userSpaceOnUse" x="0" y="0" width="40" height="40">
                                <rect width="40" height="40" fill="#D9D9D9"/>
                              </mask>
                              <g mask="url(#mask0_703_117)">
                                <path d="M25.9896 21.8077L24.3999 20.218C24.8792 18.5072 24.4837 17.0615 23.2134 15.8809C21.9431 14.7004 20.5216 14.3291 18.949 14.7671L17.3593 13.1774C17.7354 12.9744 18.1446 12.8233 18.5868 12.7239C19.0291 12.6245 19.5003 12.5749 20.0003 12.5749C21.8386 12.5749 23.3968 13.2139 24.6749 14.4921C25.9531 15.7702 26.5921 17.3284 26.5921 19.1667C26.5921 19.6667 26.5396 20.146 26.4345 20.6047C26.3295 21.0634 26.1812 21.4644 25.9896 21.8077ZM31.308 27.0555L29.8293 25.6475C31.0316 24.7479 32.0913 23.7513 33.0083 22.6576C33.9253 21.564 34.6491 20.4003 35.1798 19.1667C33.7909 16.2258 31.7519 13.8951 29.0628 12.1747C26.3737 10.4543 23.4205 9.59404 20.2033 9.59404C19.2211 9.59404 18.2339 9.67773 17.2417 9.84512C16.2496 10.0125 15.3899 10.2244 14.6627 10.4808L13.0473 8.84837C14.0181 8.44098 15.1307 8.11443 16.3849 7.8687C17.6392 7.62295 18.8799 7.50008 20.1071 7.50008C23.9005 7.50008 27.3713 8.56383 30.5195 10.6913C33.6676 12.8188 35.9732 15.6439 37.4361 19.1667C36.7773 20.7272 35.9356 22.1688 34.911 23.4915C33.8865 24.8141 32.6854 26.0021 31.308 27.0555ZM33.4212 36.2905L26.6777 29.6153C25.823 29.9729 24.8185 30.2653 23.6643 30.4925C22.5101 30.7197 21.2888 30.8333 20.0003 30.8333C16.1477 30.8333 12.6517 29.7696 9.51208 27.6421C6.3725 25.5146 4.05662 22.6895 2.56445 19.1667C3.16845 17.7059 3.98113 16.3118 5.00249 14.9845C6.02388 13.6573 7.1877 12.4637 8.49395 11.4039L3.55166 6.45516L5.02595 4.96375L34.8336 34.7714L33.4212 36.2905ZM9.94049 12.8782C8.95474 13.5976 7.97522 14.5358 7.00191 15.6929C6.02861 16.8499 5.29587 18.0079 4.8037 19.1667C6.20398 22.1076 8.2647 24.4383 10.9859 26.1587C13.707 27.8791 16.7645 28.7394 20.1584 28.7394C21.1007 28.7394 22.0345 28.6649 22.9597 28.516C23.885 28.3672 24.583 28.1923 25.0538 27.9915L22.3807 25.3012C22.0894 25.4394 21.7172 25.5502 21.2642 25.6335C20.8112 25.7169 20.3899 25.7585 20.0003 25.7585C18.1734 25.7585 16.618 25.1223 15.3342 23.8499C14.0504 22.5775 13.4085 21.0164 13.4085 19.1667C13.4085 18.7764 13.4501 18.3631 13.5335 17.9268C13.6168 17.4906 13.7276 17.1104 13.8657 16.7863L9.94049 12.8782Z" fill="#08090B"/>
                              </g>
                            </svg>
                          )}
                        </div>
                        <div className="col-span-10 text-left flex items-center">
                          <span className="pl-5">
                            {showHiddenItems ? 'Hide hidden files' : 'Show hidden files'}
                          </span>
                        </div>
                      </div>
                      <div
                        onClick={close}
                        className="cursor-pointer mt-5 -mb-2 border-b w-fit mx-auto border-b-black pb-0.5"
                      >
                        Cancel
                      </div>
                    </div>
                  </animated.div>
                </div>
              )}
              <div className="fixed top-0 left-0 bg-black bg-opacity-30 absolute w-full h-full"></div>{' '}
            </div>
          )}
        </div>
      ))}
    </div>
  );
}

export default SettingsMenu;
